name: PR ì•Œë¦¼ ì›Œí¬í”Œë¡œìš°

on:
  pull_request:
    types: [opened, closed, ready_for_review, review_requested, synchronize]
  pull_request_review:
    types: [submitted, dismissed]

jobs:
  pr-notification:
    runs-on: ubuntu-latest
    steps:
      - name: PR Opened Notification
        if: github.event.action == 'opened'
        uses: sarisia/actions-status-discord@v1
        with:
          webhook: ${{ secrets.DISCORD_WEBHOOK_URL }}
          title: "ğŸ”„ ìƒˆë¡œìš´ Pull Request"
          description: |
            **ì œëª©**: ${{ github.event.pull_request.title }}
            **ì‘ì„±ì**: ${{ github.event.pull_request.user.login }}
            **ë¸Œëœì¹˜**: `${{ github.event.pull_request.head.ref }}` â†’ `${{ github.event.pull_request.base.ref }}`
            **ë³€ê²½ì‚¬í•­**: +${{ github.event.pull_request.additions }} -${{ github.event.pull_request.deletions }}

            ${{ github.event.pull_request.body }}

            [PR í™•ì¸í•˜ê¸°](${{ github.event.pull_request.html_url }})
          color: 0x0066cc

      - name: PR Review Requested
        if: github.event.action == 'review_requested'
        uses: tsickert/discord-webhook@v7.0.0
        with:
          webhook-url: ${{ secrets.DISCORD_WEBHOOK_URL }}
          content: |
            ğŸ‘€ **ì½”ë“œ ë¦¬ë·° ìš”ì²­**

            @${{ github.event.requested_reviewer.login }} ë‹˜ê»˜ ë¦¬ë·°ê°€ ìš”ì²­ë˜ì—ˆìŠµë‹ˆë‹¤.
            **PR**: [${{ github.event.pull_request.title }}](${{ github.event.pull_request.html_url }})
            **ìš”ì²­ì**: ${{ github.event.pull_request.user.login }}

      - name: PR Merged Celebration
        if: github.event.action == 'closed' && github.event.pull_request.merged == true
        uses: sarisia/actions-status-discord@v1
        with:
          webhook: ${{ secrets.DISCORD_WEBHOOK_URL }}
          title: "ğŸ‰ Pull Request ë³‘í•© ì™„ë£Œ!"
          description: |
            **ì¶•í•˜í•©ë‹ˆë‹¤!** PRì´ ì„±ê³µì ìœ¼ë¡œ ë³‘í•©ë˜ì—ˆìŠµë‹ˆë‹¤.

            **ì œëª©**: ${{ github.event.pull_request.title }}
            **ì‘ì„±ì**: ${{ github.event.pull_request.user.login }}
            **ë³‘í•©ì**: ${{ github.event.pull_request.merged_by.login }}
            **ëŒ€ìƒ ë¸Œëœì¹˜**: `${{ github.event.pull_request.base.ref }}`

            **í†µê³„**:
            - ì»¤ë°‹ ìˆ˜: ${{ github.event.pull_request.commits }}
            - ë³€ê²½ëœ íŒŒì¼: ${{ github.event.pull_request.changed_files }}
            - ì¶”ê°€: +${{ github.event.pull_request.additions }}
            - ì‚­ì œ: -${{ github.event.pull_request.deletions }}
          color: 0x28a745
          username: Merge Bot